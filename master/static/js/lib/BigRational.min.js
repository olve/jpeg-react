var bigRat=function(e){"use strict";function t(e,t){if(t.isZero())throw"Denominator cannot be 0.";this.numerator=this.num=e,this.denominator=this.denom=t}function i(e,r){var i=n(e,r),s=e.over(i),o=r.over(i);return o.isNegative()?new t(s.negate(),o.negate()):new t(s,o)}function s(e,t){return u(e,t)}function o(n){var r=n.split(/e/i);if(r.length>2)throw new Error("Invalid input: too many 'e' tokens");if(r.length>1){var s=!0;r[1][0]==="-"&&(r[1]=r[1].slice(1),s=!1),r[1][0]==="+"&&(r[1]=r[1].slice(1));var u=o(r[0]),a=new t(e(10).pow(r[1]),e[1]);return s?u.times(a):u.over(a)}r=n.split(".");if(r.length>2)throw new Error("Invalid input: too many '.' tokens");if(r.length>1){var f=new t(e(r[0]),e[1]),l=r[1].length;while(r[1][0]==="0")r[1]=r[1].slice(1);var c="1"+Array(l+1).join("0"),h=i(e(r[1]),e(c));return f=f.add(h),r[0][0]==="-"&&(f=f.negate()),f}return new t(e(n),e[1])}function u(n,r){if(!n)return new t(e(0),e[1]);if(r)return i(e(n),e(r));if(e.isInstance(n))return new t(n,e[1]);if(n instanceof t)return n;var s,u,a=String(n),f=a.split("/");if(f.length>2)throw new Error("Invalid input: too many '/' tokens");if(f.length>1){var l=f[0].split("_");if(l.length>2)throw new Error("Invalid input: too many '_' tokens");if(l.length>1){var c=l[0][0]!=="-";return s=e(l[0]).times(f[1]),c?s=s.add(l[1]):s=s.subtract(l[1]),u=e(f[1]),i(s,u)}return i(e(f[0]),e(f[1]))}return o(a)}var n=e.gcd,r=e.lcm;return t.prototype.add=function(e,t){var n=s(e,t),o=r(this.denom,n.denom),u=o.divide(this.denom),a=o.divide(n.denom);return u=this.num.times(u),a=n.num.times(a),i(u.add(a),o)},t.prototype.plus=t.prototype.add,t.prototype.subtract=function(e,t){var n=s(e,t);return this.add(n.negate())},t.prototype.minus=t.prototype.subtract,t.prototype.multiply=function(e,t){var n=s(e,t);return i(this.num.times(n.num),this.denom.times(n.denom))},t.prototype.times=t.prototype.multiply,t.prototype.divide=function(e,t){var n=s(e,t);return i(this.num.times(n.denom),this.denom.times(n.num))},t.prototype.over=t.prototype.divide,t.prototype.reciprocate=function(){return new t(this.denom,this.num)},t.prototype.mod=function(e,t){var n=s(e,t);return this.minus(n.times(this.over(n).floor()))},t.prototype.pow=function(t){var n=e(t),r=this.num.pow(n),s=this.denom.pow(n);return i(r,s)},t.prototype.floor=function(n){var r=this.num.divmod(this.denom),i;return r.remainder.isZero()||!r.quotient.sign?i=r.quotient:i=r.quotient.prev(),n?i:new t(i,e[1])},t.prototype.ceil=function(n){var r=this.num.divmod(this.denom),i;return r.remainder.isZero()||r.quotient.sign?i=r.quotient:i=r.quotient.next(),n?i:new t(i,e[1])},t.prototype.round=function(e){return this.add(1,2).floor(e)},t.prototype.compareAbs=function(e,t){var n=s(e,t);return this.denom.equals(n.denom)?this.num.compareAbs(n.num):this.num.times(n.denom).compareAbs(n.num.times(this.denom))},t.prototype.compare=function(e,t){var n=s(e,t);if(this.denom.equals(n.denom))return this.num.compare(n.num);var r=this.denom.sign===n.denom.sign?1:-1;return r*this.num.times(n.denom).compare(n.num.times(this.denom))},t.prototype.compareTo=t.prototype.compare,t.prototype.equals=function(e,t){return this.compare(e,t)===0},t.prototype.eq=t.prototype.equals,t.prototype.notEquals=function(e,t){return this.compare(e,t)!==0},t.prototype.neq=t.prototype.notEquals,t.prototype.lesser=function(e,t){return this.compare(e,t)<0},t.prototype.lt=t.prototype.lesser,t.prototype.lesserOrEquals=function(e,t){return this.compare(e,t)<=0},t.prototype.leq=t.prototype.lesserOrEquals,t.prototype.greater=function(e,t){return this.compare(e,t)>0},t.prototype.gt=t.prototype.greater,t.prototype.greaterOrEquals=function(e,t){return this.compare(e,t)>=0},t.prototype.geq=t.prototype.greaterOrEquals,t.prototype.abs=function(){return this.isPositive()?this:this.negate()},t.prototype.negate=function(){return this.denom.sign?new t(this.num,this.denom.negate()):new t(this.num.negate(),this.denom)},t.prototype.isNegative=function(){return this.num.sign!==this.denom.sign},t.prototype.isPositive=function(){return this.num.sign===this.denom.sign},t.prototype.isZero=function(){return this.num.isZero()},t.prototype.toDecimal=function(e){e=e||10;var t=this.num.divmod(this.denom),n=t.quotient.toString(),r=u(t.remainder.abs(),this.denom),i="";while(i.length<=e){var s;for(s=0;s<=10;s++)if(u(i+s,"1"+Array(i.length+2).join("0")).greater(r)){s--;break}i+=s}while(i.slice(-1)==="0")i=i.slice(0,-1);return i===""?n:n+"."+i},t.prototype.toString=function(){return String(this.num)+"/"+String(this.denom)},t.prototype.valueOf=function(){return this.num/this.denom},u.zero=u(0),u.one=u(1),u.minusOne=u(-1),u}(typeof bigInt!="undefined"?bigInt:require("big-integer"));typeof module!="undefined"&&module.hasOwnProperty("exports")&&(module.exports=bigRat);